<!-- Save this as: _includes/photo-carousel.html -->
<div class="photo-carousel">
  <div class="carousel-container">
    <div class="carousel-slide active">
      <img src="/images/jaden_nurseshark.png" alt="Nurse shark research">
      <div class="carousel-caption">Working with nurse sharks in marine conservation research</div>
    </div>
    <div class="carousel-slide">
      <img src="/images/med.png" alt="Photo 2">
      <div class="carousel-caption">Our work on developing playful pediatric assistant robots is featured in [Stanford Report](https://news.stanford.edu/report/2023/08/01/robo-dogs-unleash-fun-joy-stanford-hospital/), [ABC News]([https://news.stanford.edu/report/2023/08/01/robo-dogs-unleash-fun-joy-stanford-hospital/](https://www.youtube.com/watch?v=53UHRF8ns1I&ab_channel=StuartBowers)https://www.youtube.com/watch?v=53UHRF8ns1I&ab_channel=StuartBowers), and more.</div>
    </div>
    <div class="carousel-slide">
      <img src="/images/atheris.jpeg" alt="Photo 3">
      <div class="carousel-caption">Caption for your third photo</div>
    </div>
    <!-- Add more slides as needed -->
  </div>
  
  <button class="carousel-prev" onclick="changeSlide(-1)">&#10094;</button>
  <button class="carousel-next" onclick="changeSlide(1)">&#10095;</button>
  
  <div class="carousel-dots">
    <span class="dot active" onclick="currentSlide(1)"></span>
    <span class="dot" onclick="currentSlide(2)"></span>
    <span class="dot" onclick="currentSlide(3)"></span>
    <!-- Add more dots to match number of slides -->
  </div>
</div>

<script>
let slideIndex = 1;

function changeSlide(n) {
  showSlide(slideIndex += n);
}

function currentSlide(n) {
  showSlide(slideIndex = n);
}

function showSlide(n) {
  let slides = document.getElementsByClassName("carousel-slide");
  let dots = document.getElementsByClassName("dot");
  
  if (n > slides.length) {
    slideIndex = 1;
  }
  if (n < 1) {
    slideIndex = slides.length;
  }
  
  for (let i = 0; i < slides.length; i++) {
    slides[i].classList.remove("active");
  }
  
  for (let i = 0; i < dots.length; i++) {
    dots[i].classList.remove("active");
  }
  
  slides[slideIndex - 1].classList.add("active");
  dots[slideIndex - 1].classList.add("active");
}

// Keyboard navigation
document.addEventListener('keydown', function(e) {
  if (e.key === 'ArrowLeft') {
    changeSlide(-1);
  } else if (e.key === 'ArrowRight') {
    changeSlide(1);
  }
});

// Touch/swipe support for mobile
let touchStartX = 0;
let touchEndX = 0;

const carousel = document.querySelector('.photo-carousel');

if (carousel) {
  carousel.addEventListener('touchstart', function(e) {
    touchStartX = e.changedTouches[0].screenX;
  });

  carousel.addEventListener('touchend', function(e) {
    touchEndX = e.changedTouches[0].screenX;
    handleSwipe();
  });
}

function handleSwipe() {
  if (touchEndX < touchStartX - 50) {
    changeSlide(1);
  }
  if (touchEndX > touchStartX + 50) {
    changeSlide(-1);
  }
}
</script>
